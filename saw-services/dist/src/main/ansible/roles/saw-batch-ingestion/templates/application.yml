info:
  component: Synchronoss Batch Ingestion Service
spring:
  application:
    name: saw-batch-ingestion-service
  flyway:
    baseline-on-migrate: true
  datasource:
    #The MariaDB instances are in the saw-security Ansible group
    url: jdbc:mariadb://{% for host in groups['saw-security'] %}{% if loop.last %}{{host}}:3306{% else %}{{host}}:3306,{% endif %}{% endfor %}/sip_bis
    username: sip_bis
    password: {{ saw_batch_ingestion_db_password }}
    driver-class-name: org.mariadb.jdbc.Driver
    dbcp2:
      test-while-idle: true
      validation-query: SELECT 1
  jpa:
    show-sql: false
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        format_sql : true

logging:
  level:
    com.synchronoss.saw: INFO
    org.springframework: INFO
    org.hibernate.type.descriptor.sql.BasicBinder : INFO
    org.hibernate.SQL: INFO
    org.springframework.retry: INFO

server:
  address: localhost
  port: 9651
  servlet:
    context-path: ''
  maxHttpHeaderSize: 65536
  compression:
    enabled: true
    mime-types: text/html,text/css,application/javascript,application/json
management:
  endpoint:
    health:
      show-details: always
  endpoints:
    web:
      exposure:
        include: info, health, prometheus

application:
    async:
        core-pool-size: 10
        max-pool-size: 50
        queue-capacity: 10000
sip:
  service:
    index: {{ groups['saw-services'].index(inventory_hostname) }}
    max.attempts : 3
    retry.delay: 5000
    retry.diff.mins: {{ sip_bis_retry_diffs_in_minutes  | default(5) }}
    retry.page.size: 20
    max.inprogress.mins: 45
bis:
  transfer-batch-size: 10
  modified-retries: 3
  default-data-drop-location: "{{ 'maprfs://' + sip_var_path + '/workbench'  | default('maprfs:///var/sip/workbench') }}"
  scheduler-url: http://localhost:9600
  recheck-file-modified: {{ sip_bis_recheck_file_modified  | default('false') }}
  destination-fs-user: mapr
