<div fxLayout="row" fxLayoutAlign="space-between center">
  <div flex></div>
  <h1 class="title" [textContent]="chartTitle"></h1>

  <div class="toggle-icons">
    <mat-icon
      *ngIf="toggleToGrid"
      class="mat-icon material-icons"
      roleÏ€="img"
      (click)="exportGridToExcel()"
      matTooltip="Export Grid Data"
    >
      <img src="assets/img/excel.png" style="width: 15px;" />
    </mat-icon>
    <mat-icon
      fontIcon="icon-report"
      (click)="viewToggle(true)"
      [class.active]="toggleToGrid"
      matTooltip="Toggle to Grid"
    >
    </mat-icon>
    <mat-icon
      fontIcon="icon-vert-bar-chart"
      (click)="viewToggle(false)"
      [class.active]="!toggleToGrid"
      matTooltip="Toggle to Chart"
    >
    </mat-icon>
  </div>
</div>

<div class="chart-data-grid" *ngIf="toggleToGrid">
  <dx-data-grid
    #dataGrid
    class="report-toggle"
    [customizeColumns]="customizeColumns"
    [columnMinWidth]="150"
    [columnResizingMode]="'widget'"
    [allowColumnReordering]="true"
    [allowColumnResizing]="true"
    [showColumnHeaders]="true"
    [showColumnLines]="false"
    [showRowLines]="false"
    [showBorders]="false"
    [rowAlternationEnabled]="true"
    [hoverStateEnabled]="true"
    [wordWrapEnabled]="false"
    [dataSource]="chartToggleData"
  >
    <dxo-paging [pageSize]="25"></dxo-paging>
    <dxo-pager
      [showPageSizeSelector]="true"
      [allowedPageSizes]="[25, 50, 75, 100]"
    ></dxo-pager>
    <dxo-export [enabled]="false" [fileName]="analysis.name"></dxo-export>
    <dxo-scrolling showScrollbar="always" [useNative]="false"></dxo-scrolling>
  </dx-data-grid>
</div>

<div *ngIf="!toggleToGrid">
  <chart
    [updater]="updater"
    [options]="chartOptions"
    [chartType]="
      analysis.sipQuery ? analysis.chartOptions.chartType : analysis.chartType
    "
    [enableExport]="true"
    [attr.e2e]="
      'chart-type:' +
      (analysis.sipQuery ? analysis.chartOptions.chartType : analysis.chartType)
    "
  >
  </chart>
</div>
