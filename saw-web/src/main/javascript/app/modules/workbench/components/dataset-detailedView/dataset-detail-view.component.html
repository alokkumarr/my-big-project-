<div class="details-container">
  <div class="details-header" fxLayout="row" fxLayoutAlign="center center">
    <button mat-button class="bck-btn">
      <mat-icon fontIcon="icon-arrow-left" (click)="backToDS()"></mat-icon>
    </button>
    <div class="ds-name" fxFlex fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
      <span>Selected Dataset: </span>
      <mat-chip-list>
        <mat-chip>{{dsMetadata.system.name}}</mat-chip>
      </mat-chip-list>
    </div>
  </div>
  <div class="details-body">
    <mat-tab-group dynamicHeight="false">
      <mat-tab label="Summary">
        <div fxLayout="row" fxFill fxFlex fxLayoutGap="10px">
          <mat-card class="details-card" fxLayout="column" fxFlex="60">
            <div class="ds-details">
              <span class="details-title mat-subheading-2">Dataset Details</span>
              <mat-divider></mat-divider>
              <div class="details-content" fxLayout="row">
                <span class="prop-name">Dataset Name :</span>
                <span class="prop-value">{{dsMetadata.system.name}}</span>
              </div>
              <div class="details-content" fxLayout="row">
                <span class="prop-name">Dataset Description :</span>
                <span class="prop-value">{{dsMetadata.system.description}}</span>
              </div>
              <div class="details-content" fxLayout="row">
                <span class="prop-name">Format :</span>
                <span class="prop-value">{{dsMetadata.system.format}}</span>
              </div>
              <div class="details-content" fxLayout="row">
                <span class="prop-name">Number of Files :</span>
                <span class="prop-value">{{dsMetadata.system.numberOfFiles}}</span>
              </div>
            </div>
            <h2></h2>
            <div class="ds-details">
              <span class="details-title mat-subheading-2">Audit Log</span>
              <mat-divider></mat-divider>
              <div class="details-content" fxLayout="row">
                <span class="prop-name">Created By :</span>
                <span class="prop-value">{{dsMetadata.system.user}}</span>
              </div>
              <div class="details-content" fxLayout="row">
                <span class="prop-name">Started :</span>
                <span class="prop-value">{{dsMetadata.asOfNow.started}}</span>
              </div>
              <div class="details-content" fxLayout="row">
                <span class="prop-name">Finished :</span>
                <span class="prop-value">{{dsMetadata.asOfNow.finished}}</span>
              </div>
            </div>
          </mat-card>
          <mat-card class="details-card details-grid" fxFlex="40">
            <dx-data-grid fxFlex [dataSource]="dsMetadata.schema" [rowAlternationEnabled]="true" [showBorders]="false" [columns]="['Field Name', 'Data Type']">
              <dxo-filter-row [visible]="showFilterRow" [applyFilter]="currentFilter"></dxo-filter-row>
              <dxo-header-filter [visible]="showHeaderFilter"></dxo-header-filter>
            </dx-data-grid>
          </mat-card>

        </div>
      </mat-tab>
      <mat-tab label="Data Preview">
        <dx-data-grid *ngIf="previewStatus === 'success'" fxFlex fxFill [dataSource]="previewData" [allowColumnResizing]="true" [columnAutoWidth]="true" [rowAlternationEnabled]="true" [showBorders]="false">
          <dxo-scrolling mode="infinite"></dxo-scrolling>
          <dxo-filter-row [visible]="true" [applyFilter]="auto"></dxo-filter-row>
          <dxo-header-filter [visible]="true"></dxo-header-filter>
        </dx-data-grid>
        <div class="loading" fxLayout="column" fxLayoutAlign="center center" *ngIf="previewStatus === 'queued'">
          <span>Generating Preview </span>
          <mat-spinner></mat-spinner>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
