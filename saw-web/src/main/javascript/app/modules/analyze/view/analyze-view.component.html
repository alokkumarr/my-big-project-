<div>
  <mat-toolbar fxLayout="row" fxLayoutAlign="space-between center">
    <div fxLayout="row" fxFlex="40">
      <div class="category-title" e2e="category-title">{{categoryName | async}}</div>
      <search-box placeholder="Search Analyses"
                  [value]="filterObj.searchTerm"
                  (searchTermChange)="applySearchFilter($event)"
                  [delay]="1000">
      </search-box>
    </div>

    <div fxLayout="row" fxLayoutAlign="start center" fxFlex="40">
      <mat-radio-group [value]="viewMode" (change)="onViewChange($event.value)" class="switch-view">
        <mat-radio-button [value]="LIST_VIEW" e2e="analyze-list-view">
          <mat-icon fontIcon="icon-Table-view" i18n-matTooltip matTooltip="List view"></mat-icon>
        </mat-radio-button>
        <mat-radio-button [value]="CARD_VIEW" e2e="analyze-card-view">
          <mat-icon fontIcon="icon-card-view" i18n-matTooltip matTooltip="Card view"></mat-icon>
        </mat-radio-button>
      </mat-radio-group>

      <mat-form-field class="select-type">
        <mat-select (selectionChange)="onAnalysisTypeChange($event.value)" [value]="filterObj.analysisType">
          <mat-option *ngFor="let type of analysisTypes" [value]="type.value">
            {{ type.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div fxLayout="row" fxLayoutAlign="end center" fxFlex="20">
      <button *ngIf="canUserCreate"
              (click)="openNewAnalysisModal()"
              mat-raised-button
              e2e="open-new-analysis-modal"
              color="primary">
        + <span i18n>Analysis</span>
      </button>
    </div>
  </mat-toolbar>
  <div [ngSwitch]="viewMode">
    <analyze-list-view-u *ngSwitchCase="LIST_VIEW"
                         (action)="onAction($event)"
                         [analyses]="filteredAnalyses | analysesFilter:filterObj.analysisType:cronJobs"
                         [analysisType]="analysisType"
                         [searchTerm]="filterObj.searchTermValue"
                         [cronJobs]="cronJobs">
    </analyze-list-view-u>
    <analyze-card-view-u *ngSwitchCase="CARD_VIEW"
                         (action)="onAction($event)"
                         [analyses]="filteredAnalyses | analysesFilter:filterObj.analysisType:cronJobs"
                         [analysisType]="analysisType"
                         [highlightTerm]="filterObj.searchTermValue"
                         [cronJobs]="cronJobs">
    </analyze-card-view-u>
  </div>
</div>
