<designer-header class="designer__header"
                 [analysis]="analysis"
                 [isInDraftMode]="isInDraftMode"
                 [designerState]="designerState"
                 (onBack)="onBack.emit()"
                 (requestAction)="onToolbarAction($event)">
</designer-header>

<designer-settings-single class="designer__data-settings"
                   [analysisType]="(analysisStarter || analysis).type"
                   [analysisSubtype]="(analysisStarter || analysis).chartType"
                   (settingsChange)="onSettingsChange($event)"
                   [artifactColumns]="analysis ? analysis.artifacts[0].columns : []">
</designer-settings-single>


<div fxLayout="column">
  <designer-settings-aux class="designer__main"
                         [auxSettings]="auxSettings"
                         [analysisType]="(analysisStarter || analysis).type"
                         [analysisSubtype]="(analysisStarter || analysis).chartType"
                         (settingsChange)="onAuxSettingsChange($event)"></designer-settings-aux>

  <ng-container [ngSwitch]="(analysisStarter || analysis).type">

    <designer-pivot class="designer__main"
                    *ngSwitchCase="'pivot'"
                    [data]="data"
                    [sorts]="sorts"
                    [artifactColumns]="firstArtifactColumns"
                    [designerState]="designerState">
    </designer-pivot>
    <designer-chart class="designer__main"
                    *ngSwitchCase="'chart'"
                    [chartType]="(analysisStarter || analysis).chartType"
                    [sorts]="sorts"
                    [auxSettings]="auxSettings"
                    [data]="data"
                    [designerState]="designerState"
                    [sqlBuilder]="analysis && analysis.sqlBuilder">
    </designer-chart>
  </ng-container>
</div>
