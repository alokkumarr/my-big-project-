<div fxLayout="row"
     fxLayout.lt-md="column" fxLayoutGap.lt-md="10px"
     fxLayoutAlign="space-between"
     class="header__container">
  <div fxLayout="row" fxLayoutAlign="start center">
    <button mat-icon-button (click)="onBack.emit()" style="margin-right: 10px;">
      <mat-icon class="back-button-icon" fontIcon="icon-arrow-left"></mat-icon>
    </button>
    <div fxLayout="row"
         fxLayoutAlign="start" fxLayoutGap="10px"
         *ngIf="analysis">
      <div class="header__name">
        <strong class="e2e-designer-title">
          {{analysis.name}}
        </strong>
        <label i18n *ngIf="isInDraftMode">Draft</label>
      </div>
      <div matTooltip="Metric Name" class="header__description">
        &#40;&nbsp;<mat-icon fontIcon="icon-report"></mat-icon>
        <span i18n>{{analysis.metricName}}</span>&nbsp;&#41;
      </div>
    </div>
  </div>

  <div fxLayout="row"
       fxLayoutAlign="space-between center">
    <mat-button-toggle-group *ngIf="analysis && analysis.type === 'report'"
                             (change)="requestAction.emit('modeToggle')"
                             [value]="isInQueryMode"
                             [disabled]="analysis.edit">
      <mat-button-toggle [value]="false" [disabled]="analysis.edit">
        <mat-icon fontIcon="icon-designer-mode"></mat-icon>
        <ng-container i18n>Designer</ng-container>
      </mat-button-toggle>
      <mat-button-toggle [value]="true">
        <mat-icon fontIcon="icon-query-mode"></mat-icon>
        <ng-container i18n>Query</ng-container>
      </mat-button-toggle>
    </mat-button-toggle-group>

    <button mat-button
            e2e="refresh-data-btn"
            *ngIf="analysis && (analysis.type === 'report' || analysis.type === 'esReport') && !isInQueryMode"
            [disabled]="!areMinRequirmentsMet"
            [color]="designerState === DesignerStates.SELECTION_OUT_OF_SYNCH_WITH_DATA ? 'primary' : ''"
            (click)="requestAction.emit('refresh')">
      <ng-container i18n>Refresh Data</ng-container>
    </button>

    <!-- <button mat-button
            e2e="open-description-modal"
            (click)="requestAction.emit('description')">
      <mat-icon fontIcon="icon-description"></mat-icon>
      <ng-container i18n>Description</ng-container>
    </button> -->

    <button mat-button
            [disabled]="!areMinRequirmentsMet"
            e2e="open-preview-modal"
            (click)="requestAction.emit('preview')">
      <mat-icon fontIcon="icon-full-screen"></mat-icon>
      <ng-container i18n>Preview</ng-container>
    </button>

    <button mat-button
            e2e="open-sort-modal"
            [disabled]="isInQueryMode"
            (click)="requestAction.emit('sort')">
      <mat-icon fontIcon="icon-sort"></mat-icon>
      <ng-container i18n>Sort</ng-container>
    </button>

    <button mat-button
            e2e="open-filter-modal"
            [disabled]="isInQueryMode"
            (click)="requestAction.emit('filter')">
      <mat-icon fontIcon="icon-filter"></mat-icon>
      <ng-container i18n>Filter</ng-container>
    </button>

    <button mat-raised-button
            [disabled]="!areMinRequirmentsMet"
            e2e="designer-save-btn"
            color="primary"
            (click)="requestAction.emit('save')">
      <ng-container i18n>Save</ng-container>
    </button>
  </div>
</div>
<mat-progress-bar *ngIf="designerState === DesignerStates.SELECTION_WAITING_FOR_DATA || designerState === DesignerStates.WAITING_FOR_COLUMNS"
                  mode="indeterminate"></mat-progress-bar>

