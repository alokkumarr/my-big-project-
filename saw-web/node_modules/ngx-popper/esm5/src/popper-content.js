/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, EventEmitter, HostListener, Renderer2, ViewChild, ViewContainerRef, ViewEncapsulation, } from "@angular/core";
import Popper from 'popper.js';
import { Placements, Triggers } from './popper-model';
var PopperContent = /** @class */ (function () {
    function PopperContent(elemRef, renderer, viewRef, CDR) {
        this.elemRef = elemRef;
        this.renderer = renderer;
        this.viewRef = viewRef;
        this.CDR = CDR;
        this.popperOptions = (/** @type {?} */ ({
            disableAnimation: false,
            disableDefaultStyling: false,
            placement: Placements.Auto,
            boundariesElement: '',
            trigger: Triggers.HOVER,
            positionFixed: false,
            appendToBody: false,
            popperModifiers: {}
        }));
        this.isMouseOver = false;
        this.onHidden = new EventEmitter();
        this.displayType = "none";
        this.opacity = 0;
        this.ariaHidden = 'true';
        this.arrowColor = null;
        this.state = true;
    }
    /**
     * @return {?}
     */
    PopperContent.prototype.onMouseOver = /**
     * @return {?}
     */
    function () {
        this.isMouseOver = true;
    };
    /**
     * @return {?}
     */
    PopperContent.prototype.showOnLeave = /**
     * @return {?}
     */
    function () {
        this.isMouseOver = false;
        if (this.popperOptions.trigger !== Triggers.HOVER && !this.popperOptions.hideOnMouseLeave) {
            return;
        }
        this.hide();
    };
    /**
     * @return {?}
     */
    PopperContent.prototype.onDocumentResize = /**
     * @return {?}
     */
    function () {
        this.update();
    };
    /**
     * @return {?}
     */
    PopperContent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.clean();
        if (this.popperOptions.appendTo && this.elemRef && this.elemRef.nativeElement && this.elemRef.nativeElement.parentNode) {
            this.viewRef.detach();
            this.elemRef.nativeElement.parentNode.removeChild(this.elemRef.nativeElement);
        }
    };
    /**
     * @return {?}
     */
    PopperContent.prototype.clean = /**
     * @return {?}
     */
    function () {
        this.toggleVisibility(false);
        if (!this.popperInstance) {
            return;
        }
        ((/** @type {?} */ (this.popperInstance))).disableEventListeners();
        this.popperInstance.destroy();
    };
    /**
     * @return {?}
     */
    PopperContent.prototype.show = /**
     * @return {?}
     */
    function () {
        if (!this.referenceObject) {
            return;
        }
        /** @type {?} */
        var appendToParent = this.popperOptions.appendTo && document.querySelector(this.popperOptions.appendTo);
        if (appendToParent && this.elemRef.nativeElement.parentNode !== appendToParent) {
            this.elemRef.nativeElement.parentNode && this.elemRef.nativeElement.parentNode.removeChild(this.elemRef.nativeElement);
            appendToParent.appendChild(this.elemRef.nativeElement);
        }
        /** @type {?} */
        var popperOptions = (/** @type {?} */ ({
            placement: this.popperOptions.placement,
            positionFixed: this.popperOptions.positionFixed,
            modifiers: {
                arrow: {
                    element: this.popperViewRef.nativeElement.querySelector('.ngxp__arrow')
                }
            }
        }));
        if (this.onUpdate) {
            popperOptions.onUpdate = (/** @type {?} */ (this.onUpdate));
        }
        /** @type {?} */
        var boundariesElement = this.popperOptions.boundariesElement && document.querySelector(this.popperOptions.boundariesElement);
        if (popperOptions.modifiers && boundariesElement) {
            popperOptions.modifiers.preventOverflow = { boundariesElement: boundariesElement };
        }
        if (popperOptions.modifiers && this.popperOptions.preventOverflow !== undefined) {
            popperOptions.modifiers.preventOverflow = popperOptions.modifiers.preventOverflow || {};
            popperOptions.modifiers.preventOverflow.enabled = this.popperOptions.preventOverflow;
            if (!popperOptions.modifiers.preventOverflow.enabled) {
                popperOptions.modifiers.hide = { enabled: false };
            }
        }
        this.determineArrowColor();
        popperOptions.modifiers = Object.assign(popperOptions.modifiers, this.popperOptions.popperModifiers);
        this.popperInstance = new Popper(this.referenceObject, this.popperViewRef.nativeElement, popperOptions);
        ((/** @type {?} */ (this.popperInstance))).enableEventListeners();
        this.scheduleUpdate();
        this.toggleVisibility(true);
        this.globalResize = this.renderer.listen('document', 'resize', this.onDocumentResize.bind(this));
    };
    /**
     * @private
     * @return {?}
     */
    PopperContent.prototype.determineArrowColor = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        ['background-color', 'backgroundColor'].some(function (clr) {
            if (!_this.popperOptions.styles) {
                return false;
            }
            if (_this.popperOptions.styles.hasOwnProperty(clr)) {
                _this.arrowColor = _this.popperOptions.styles[clr];
                return true;
            }
            return false;
        });
    };
    /**
     * @return {?}
     */
    PopperContent.prototype.update = /**
     * @return {?}
     */
    function () {
        this.popperInstance && ((/** @type {?} */ (this.popperInstance))).update();
    };
    /**
     * @return {?}
     */
    PopperContent.prototype.scheduleUpdate = /**
     * @return {?}
     */
    function () {
        this.popperInstance && ((/** @type {?} */ (this.popperInstance))).scheduleUpdate();
    };
    /**
     * @return {?}
     */
    PopperContent.prototype.hide = /**
     * @return {?}
     */
    function () {
        if (this.popperInstance) {
            this.popperInstance.destroy();
        }
        this.toggleVisibility(false);
        this.onHidden.emit();
    };
    /**
     * @param {?} state
     * @return {?}
     */
    PopperContent.prototype.toggleVisibility = /**
     * @param {?} state
     * @return {?}
     */
    function (state) {
        if (!state) {
            this.opacity = 0;
            this.displayType = "none";
            this.ariaHidden = 'true';
        }
        else {
            this.opacity = 1;
            this.displayType = "block";
            this.ariaHidden = 'false';
        }
        if (!this.CDR['destroyed']) {
            this.CDR.detectChanges();
        }
    };
    /**
     * @param {?=} classList
     * @return {?}
     */
    PopperContent.prototype.extractAppliedClassListExpr = /**
     * @param {?=} classList
     * @return {?}
     */
    function (classList) {
        if (!classList || typeof classList !== 'string') {
            return null;
        }
        try {
            return classList
                .replace(/ /, '')
                .split(',')
                .reduce(function (acc, clss) {
                acc[clss] = true;
                return acc;
            }, {});
        }
        catch (e) {
            return null;
        }
    };
    /**
     * @private
     * @return {?}
     */
    PopperContent.prototype.clearGlobalResize = /**
     * @private
     * @return {?}
     */
    function () {
        this.globalResize && typeof this.globalResize === 'function' && this.globalResize();
    };
    PopperContent.decorators = [
        { type: Component, args: [{
                    selector: "popper-content",
                    encapsulation: ViewEncapsulation.None,
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    template: "\n    <div #popperViewRef\n         [class.ngxp__container]=\"!popperOptions.disableDefaultStyling\"\n         [class.ngxp__animation]=\"!popperOptions.disableAnimation\"\n         [style.display]=\"displayType\"\n         [style.opacity]=\"opacity\"\n         [ngStyle]=\"popperOptions.styles\"\n         [ngClass]=\"extractAppliedClassListExpr(popperOptions.applyClass)\"\n         attr.aria-hidden=\"{{ariaHidden}}\"\n         [attr.aria-describedby]=\"popperOptions.ariaDescribe || null\"\n         attr.role=\"{{popperOptions.ariaRole}}\">\n      <div class=\"ngxp__inner\" *ngIf=\"text\" [innerHTML]=\"text\">\n        <ng-content></ng-content>\n      </div>\n      <div class=\"ngxp__inner\" *ngIf=\"!text\">\n        <ng-content></ng-content>\n      </div>\n      <div class=\"ngxp__arrow\" [style.border-color]=\"arrowColor\" [class.__force-arrow]=\"arrowColor\"\n           [ngClass]=\"extractAppliedClassListExpr(popperOptions.applyArrowClass)\"></div>\n\n    </div>\n  ",
                    styles: ["\n    .ngxp__container {\n      display: none;\n      position: absolute;\n      border-radius: 3px;\n      border: 1px solid grey;\n      box-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n      padding: 10px;\n    }\n\n    .ngxp__container.ngxp__animation {\n      -webkit-animation: ngxp-fadeIn 150ms ease-out;\n      -moz-animation: ngxp-fadeIn 150ms ease-out;\n      -o-animation: ngxp-fadeIn 150ms ease-out;\n      animation: ngxp-fadeIn 150ms ease-out;\n\n    }\n\n    .ngxp__container > .ngxp__arrow {\n      border-color: grey;\n      width: 0;\n      height: 0;\n      border-style: solid;\n      position: absolute;\n      margin: 5px;\n    }\n\n    .ngxp__container[x-placement^=\"top\"],\n    .ngxp__container[x-placement^=\"bottom\"],\n    .ngxp__container[x-placement^=\"right\"],\n    .ngxp__container[x-placement^=\"left\"] {\n      display: block;\n    }\n\n    .ngxp__container[x-placement^=\"top\"] {\n      margin-bottom: 5px;\n    }\n\n    .ngxp__container[x-placement^=\"top\"] > .ngxp__arrow {\n      border-width: 5px 5px 0 5px;\n      border-right-color: transparent;\n      border-bottom-color: transparent;\n      border-left-color: transparent;\n      bottom: -5px;\n      left: calc(50% - 5px);\n      margin-top: 0;\n      margin-bottom: 0;\n    }\n\n    .ngxp__container[x-placement^=\"top\"] > .ngxp__arrow.__force-arrow {\n      border-right-color: transparent !important;\n      border-bottom-color: transparent !important;\n      border-left-color: transparent !important;\n    }\n\n    .ngxp__container[x-placement^=\"bottom\"] {\n      margin-top: 5px;\n    }\n\n    .ngxp__container[x-placement^=\"bottom\"] > .ngxp__arrow {\n      border-width: 0 5px 5px 5px;\n      border-top-color: transparent;\n      border-right-color: transparent;\n      border-left-color: transparent;\n      top: -5px;\n      left: calc(50% - 5px);\n      margin-top: 0;\n      margin-bottom: 0;\n    }\n\n    .ngxp__container[x-placement^=\"bottom\"] > .ngxp__arrow.__force-arrow {\n      border-top-color: transparent !important;\n      border-right-color: transparent !important;\n      border-left-color: transparent !important;\n    }\n\n    .ngxp__container[x-placement^=\"right\"] {\n      margin-left: 5px;\n    }\n\n    .ngxp__container[x-placement^=\"right\"] > .ngxp__arrow {\n      border-width: 5px 5px 5px 0;\n      border-top-color: transparent;\n      border-bottom-color: transparent;\n      border-left-color: transparent;\n      left: -5px;\n      top: calc(50% - 5px);\n      margin-left: 0;\n      margin-right: 0;\n    }\n\n    .ngxp__container[x-placement^=\"right\"] > .ngxp__arrow.__force-arrow {\n      border-top-color: transparent !important;\n      border-bottom-color: transparent !important;\n      border-left-color: transparent !important;\n    }\n\n    .ngxp__container[x-placement^=\"left\"] {\n      margin-right: 5px;\n    }\n\n    .ngxp__container[x-placement^=\"left\"] > .ngxp__arrow {\n      border-width: 5px 0 5px 5px;\n      border-top-color: transparent;\n      border-bottom-color: transparent;\n      border-right-color: transparent;\n      right: -5px;\n      top: calc(50% - 5px);\n      margin-left: 0;\n      margin-right: 0;\n    }\n\n    .ngxp__container[x-placement^=\"left\"] > .ngxp__arrow.__force-arrow {\n      border-top-color: transparent !important;\n      border-bottom-color: transparent !important;\n      border-right-color: transparent !important;\n    }\n\n    @-webkit-keyframes ngxp-fadeIn {\n      0% {\n        display: none;\n        opacity: 0;\n      }\n\n      1% {\n        display: block;\n        opacity: 0;\n      }\n\n      100% {\n        display: block;\n        opacity: 1;\n      }\n    }\n\n    @keyframes ngxp-fadeIn {\n      0% {\n        display: none;\n        opacity: 0;\n      }\n\n      1% {\n        display: block;\n        opacity: 0;\n      }\n\n      100% {\n        display: block;\n        opacity: 1;\n      }\n    }\n  "]
                }] }
    ];
    /** @nocollapse */
    PopperContent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 },
        { type: ViewContainerRef },
        { type: ChangeDetectorRef }
    ]; };
    PopperContent.propDecorators = {
        popperViewRef: [{ type: ViewChild, args: ["popperViewRef",] }],
        onMouseOver: [{ type: HostListener, args: ['mouseover',] }],
        showOnLeave: [{ type: HostListener, args: ['mouseleave',] }]
    };
    return PopperContent;
}());
export { PopperContent };
if (false) {
    /** @type {?} */
    PopperContent.prototype.popperOptions;
    /** @type {?} */
    PopperContent.prototype.referenceObject;
    /** @type {?} */
    PopperContent.prototype.isMouseOver;
    /** @type {?} */
    PopperContent.prototype.onHidden;
    /** @type {?} */
    PopperContent.prototype.text;
    /** @type {?} */
    PopperContent.prototype.popperInstance;
    /** @type {?} */
    PopperContent.prototype.displayType;
    /** @type {?} */
    PopperContent.prototype.opacity;
    /** @type {?} */
    PopperContent.prototype.ariaHidden;
    /** @type {?} */
    PopperContent.prototype.arrowColor;
    /** @type {?} */
    PopperContent.prototype.onUpdate;
    /** @type {?} */
    PopperContent.prototype.state;
    /**
     * @type {?}
     * @private
     */
    PopperContent.prototype.globalResize;
    /** @type {?} */
    PopperContent.prototype.popperViewRef;
    /** @type {?} */
    PopperContent.prototype.elemRef;
    /**
     * @type {?}
     * @private
     */
    PopperContent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    PopperContent.prototype.viewRef;
    /**
     * @type {?}
     * @private
     */
    PopperContent.prototype.CDR;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9wcGVyLWNvbnRlbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtcG9wcGVyLyIsInNvdXJjZXMiOlsic3JjL3BvcHBlci1jb250ZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0wsdUJBQXVCLEVBQUUsaUJBQWlCLEVBQzFDLFNBQVMsRUFDVCxVQUFVLEVBQ1YsWUFBWSxFQUNaLFlBQVksRUFFWixTQUFTLEVBQ1QsU0FBUyxFQUNULGdCQUFnQixFQUNoQixpQkFBaUIsR0FDbEIsTUFBTSxlQUFlLENBQUE7QUFDdEIsT0FBTyxNQUFNLE1BQU0sV0FBVyxDQUFBO0FBQzlCLE9BQU8sRUFBQyxVQUFVLEVBQXdCLFFBQVEsRUFBQyxNQUFNLGdCQUFnQixDQUFBO0FBRXpFO0lBNk9FLHVCQUNTLE9BQW1CLEVBQ2xCLFFBQW1CLEVBQ25CLE9BQXlCLEVBQ3pCLEdBQXNCO1FBSHZCLFlBQU8sR0FBUCxPQUFPLENBQVk7UUFDbEIsYUFBUSxHQUFSLFFBQVEsQ0FBVztRQUNuQixZQUFPLEdBQVAsT0FBTyxDQUFrQjtRQUN6QixRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQTVEaEMsa0JBQWEsR0FBeUIsbUJBQXNCO1lBQzFELGdCQUFnQixFQUFFLEtBQUs7WUFDdkIscUJBQXFCLEVBQUUsS0FBSztZQUM1QixTQUFTLEVBQUUsVUFBVSxDQUFDLElBQUk7WUFDMUIsaUJBQWlCLEVBQUUsRUFBRTtZQUNyQixPQUFPLEVBQUUsUUFBUSxDQUFDLEtBQUs7WUFDdkIsYUFBYSxFQUFFLEtBQUs7WUFDcEIsWUFBWSxFQUFFLEtBQUs7WUFDbkIsZUFBZSxFQUFFLEVBQUU7U0FDcEIsRUFBQSxDQUFDO1FBSUYsZ0JBQVcsR0FBWSxLQUFLLENBQUM7UUFFN0IsYUFBUSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFNOUIsZ0JBQVcsR0FBVyxNQUFNLENBQUM7UUFFN0IsWUFBTyxHQUFXLENBQUMsQ0FBQztRQUVwQixlQUFVLEdBQVcsTUFBTSxDQUFDO1FBRTVCLGVBQVUsR0FBa0IsSUFBSSxDQUFDO1FBSWpDLFVBQUssR0FBWSxJQUFJLENBQUM7SUE4QnRCLENBQUM7Ozs7SUF0QkQsbUNBQVc7OztJQURYO1FBRUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7SUFDMUIsQ0FBQzs7OztJQUdELG1DQUFXOzs7SUFEWDtRQUVFLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLEtBQUssUUFBUSxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLEVBQUU7WUFDekYsT0FBTztTQUNSO1FBQ0QsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2QsQ0FBQzs7OztJQUVELHdDQUFnQjs7O0lBQWhCO1FBQ0UsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hCLENBQUM7Ozs7SUFTRCxtQ0FBVzs7O0lBQVg7UUFDRSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDYixJQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxFQUFDO1lBQ3BILElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDdEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQy9FO0lBQ0gsQ0FBQzs7OztJQUVELDZCQUFLOzs7SUFBTDtRQUNFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QixJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUN4QixPQUFPO1NBQ1I7UUFDRCxDQUFDLG1CQUFBLElBQUksQ0FBQyxjQUFjLEVBQU8sQ0FBQyxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFDckQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUVoQyxDQUFDOzs7O0lBRUQsNEJBQUk7OztJQUFKO1FBQ0UsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUU7WUFDekIsT0FBTztTQUNSOztZQUVLLGNBQWMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsSUFBSSxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDO1FBQ3pHLElBQUksY0FBYyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFVBQVUsS0FBSyxjQUFjLEVBQUU7WUFDOUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUN2SCxjQUFjLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7U0FDeEQ7O1lBRUcsYUFBYSxHQUF5QixtQkFBc0I7WUFDOUQsU0FBUyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUztZQUN2QyxhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxhQUFhO1lBQy9DLFNBQVMsRUFBRTtnQkFDVCxLQUFLLEVBQUU7b0JBQ0wsT0FBTyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUM7aUJBQ3hFO2FBQ0Y7U0FDRixFQUFBO1FBQ0QsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2pCLGFBQWEsQ0FBQyxRQUFRLEdBQUcsbUJBQUEsSUFBSSxDQUFDLFFBQVEsRUFBTyxDQUFDO1NBQy9DOztZQUVHLGlCQUFpQixHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsaUJBQWlCLElBQUksUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDO1FBRTVILElBQUksYUFBYSxDQUFDLFNBQVMsSUFBSSxpQkFBaUIsRUFBRTtZQUNoRCxhQUFhLENBQUMsU0FBUyxDQUFDLGVBQWUsR0FBRyxFQUFDLGlCQUFpQixtQkFBQSxFQUFDLENBQUM7U0FDL0Q7UUFDRCxJQUFJLGFBQWEsQ0FBQyxTQUFTLElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxlQUFlLEtBQUssU0FBUyxFQUFFO1lBQy9FLGFBQWEsQ0FBQyxTQUFTLENBQUMsZUFBZSxHQUFHLGFBQWEsQ0FBQyxTQUFTLENBQUMsZUFBZSxJQUFJLEVBQUUsQ0FBQztZQUN4RixhQUFhLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUM7WUFDckYsSUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBRTtnQkFDcEQsYUFBYSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUcsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFDLENBQUM7YUFDakQ7U0FDRjtRQUNELElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1FBQzNCLGFBQWEsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLENBQUM7UUFFckcsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLE1BQU0sQ0FDOUIsSUFBSSxDQUFDLGVBQWUsRUFDcEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxhQUFhLEVBQ2hDLGFBQWEsQ0FDZCxDQUFDO1FBRUYsQ0FBQyxtQkFBQSxJQUFJLENBQUMsY0FBYyxFQUFPLENBQUMsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO1FBQ3BELElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUN0QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQTtJQUNsRyxDQUFDOzs7OztJQUVPLDJDQUFtQjs7OztJQUEzQjtRQUFBLGlCQVdDO1FBVkMsQ0FBQyxrQkFBa0IsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFDLEdBQUc7WUFDL0MsSUFBSSxDQUFDLEtBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFO2dCQUM5QixPQUFPLEtBQUssQ0FBQzthQUNkO1lBQ0QsSUFBSSxLQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ2pELEtBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ2pELE9BQU8sSUFBSSxDQUFDO2FBQ2I7WUFDRCxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQzs7OztJQUVELDhCQUFNOzs7SUFBTjtRQUNFLElBQUksQ0FBQyxjQUFjLElBQUksQ0FBQyxtQkFBQSxJQUFJLENBQUMsY0FBYyxFQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUMvRCxDQUFDOzs7O0lBRUQsc0NBQWM7OztJQUFkO1FBQ0UsSUFBSSxDQUFDLGNBQWMsSUFBSSxDQUFDLG1CQUFBLElBQUksQ0FBQyxjQUFjLEVBQU8sQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3ZFLENBQUM7Ozs7SUFFRCw0QkFBSTs7O0lBQUo7UUFFRSxJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDdkIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztTQUMvQjtRQUNELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3ZCLENBQUM7Ozs7O0lBRUQsd0NBQWdCOzs7O0lBQWhCLFVBQWlCLEtBQWM7UUFDN0IsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNWLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO1lBQ2pCLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDO1lBQzFCLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO1NBQzFCO2FBQ0k7WUFDSCxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQztZQUNqQixJQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQztZQUMzQixJQUFJLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQztTQUMzQjtRQUNELElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQzFCLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLENBQUM7U0FDMUI7SUFDSCxDQUFDOzs7OztJQUVELG1EQUEyQjs7OztJQUEzQixVQUE0QixTQUFrQjtRQUM1QyxJQUFJLENBQUMsU0FBUyxJQUFJLE9BQU8sU0FBUyxLQUFLLFFBQVEsRUFBRTtZQUMvQyxPQUFPLElBQUksQ0FBQztTQUNiO1FBQ0QsSUFBSTtZQUNGLE9BQU8sU0FBUztpQkFDYixPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQztpQkFDaEIsS0FBSyxDQUFDLEdBQUcsQ0FBQztpQkFDVixNQUFNLENBQUMsVUFBQyxHQUFHLEVBQUUsSUFBSTtnQkFDaEIsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztnQkFDakIsT0FBTyxHQUFHLENBQUM7WUFDYixDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUE7U0FDVDtRQUNELE9BQU8sQ0FBQyxFQUFFO1lBQ1IsT0FBTyxJQUFJLENBQUM7U0FDYjtJQUNILENBQUM7Ozs7O0lBRU8seUNBQWlCOzs7O0lBQXpCO1FBQ0UsSUFBSSxDQUFDLFlBQVksSUFBSSxPQUFPLElBQUksQ0FBQyxZQUFZLEtBQUssVUFBVSxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN0RixDQUFDOztnQkEzWEYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxnQkFBZ0I7b0JBQzFCLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJO29CQUNyQyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtvQkFDL0MsUUFBUSxFQUFFLHU5QkFxQlQ7NkJBQ1EsMDFIQXVKUjtpQkFDRjs7OztnQkE5TEMsVUFBVTtnQkFJVixTQUFTO2dCQUVULGdCQUFnQjtnQkFSUyxpQkFBaUI7OztnQ0FzT3pDLFNBQVMsU0FBQyxlQUFlOzhCQUd6QixZQUFZLFNBQUMsV0FBVzs4QkFLeEIsWUFBWSxTQUFDLFlBQVk7O0lBNko1QixvQkFBQztDQUFBLEFBN1hELElBNlhDO1NBMU1ZLGFBQWE7OztJQUV4QixzQ0FTRTs7SUFFRix3Q0FBNkI7O0lBRTdCLG9DQUE2Qjs7SUFFN0IsaUNBQThCOztJQUU5Qiw2QkFBYTs7SUFFYix1Q0FBdUI7O0lBRXZCLG9DQUE2Qjs7SUFFN0IsZ0NBQW9COztJQUVwQixtQ0FBNEI7O0lBRTVCLG1DQUFpQzs7SUFFakMsaUNBQW1COztJQUVuQiw4QkFBc0I7Ozs7O0lBRXRCLHFDQUEwQjs7SUFFMUIsc0NBQzBCOztJQXFCeEIsZ0NBQTBCOzs7OztJQUMxQixpQ0FBMkI7Ozs7O0lBQzNCLGdDQUFpQzs7Ozs7SUFDakMsNEJBQThCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSG9zdExpc3RlbmVyLFxuICBPbkRlc3Ryb3ksXG4gIFJlbmRlcmVyMixcbiAgVmlld0NoaWxkLFxuICBWaWV3Q29udGFpbmVyUmVmLFxuICBWaWV3RW5jYXBzdWxhdGlvbixcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIlxuaW1wb3J0IFBvcHBlciBmcm9tICdwb3BwZXIuanMnXG5pbXBvcnQge1BsYWNlbWVudHMsIFBvcHBlckNvbnRlbnRPcHRpb25zLCBUcmlnZ2Vyc30gZnJvbSAnLi9wb3BwZXItbW9kZWwnXG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogXCJwb3BwZXItY29udGVudFwiLFxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgdGVtcGxhdGU6IGBcbiAgICA8ZGl2ICNwb3BwZXJWaWV3UmVmXG4gICAgICAgICBbY2xhc3Mubmd4cF9fY29udGFpbmVyXT1cIiFwb3BwZXJPcHRpb25zLmRpc2FibGVEZWZhdWx0U3R5bGluZ1wiXG4gICAgICAgICBbY2xhc3Mubmd4cF9fYW5pbWF0aW9uXT1cIiFwb3BwZXJPcHRpb25zLmRpc2FibGVBbmltYXRpb25cIlxuICAgICAgICAgW3N0eWxlLmRpc3BsYXldPVwiZGlzcGxheVR5cGVcIlxuICAgICAgICAgW3N0eWxlLm9wYWNpdHldPVwib3BhY2l0eVwiXG4gICAgICAgICBbbmdTdHlsZV09XCJwb3BwZXJPcHRpb25zLnN0eWxlc1wiXG4gICAgICAgICBbbmdDbGFzc109XCJleHRyYWN0QXBwbGllZENsYXNzTGlzdEV4cHIocG9wcGVyT3B0aW9ucy5hcHBseUNsYXNzKVwiXG4gICAgICAgICBhdHRyLmFyaWEtaGlkZGVuPVwie3thcmlhSGlkZGVufX1cIlxuICAgICAgICAgW2F0dHIuYXJpYS1kZXNjcmliZWRieV09XCJwb3BwZXJPcHRpb25zLmFyaWFEZXNjcmliZSB8fCBudWxsXCJcbiAgICAgICAgIGF0dHIucm9sZT1cInt7cG9wcGVyT3B0aW9ucy5hcmlhUm9sZX19XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwibmd4cF9faW5uZXJcIiAqbmdJZj1cInRleHRcIiBbaW5uZXJIVE1MXT1cInRleHRcIj5cbiAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwibmd4cF9faW5uZXJcIiAqbmdJZj1cIiF0ZXh0XCI+XG4gICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cIm5neHBfX2Fycm93XCIgW3N0eWxlLmJvcmRlci1jb2xvcl09XCJhcnJvd0NvbG9yXCIgW2NsYXNzLl9fZm9yY2UtYXJyb3ddPVwiYXJyb3dDb2xvclwiXG4gICAgICAgICAgIFtuZ0NsYXNzXT1cImV4dHJhY3RBcHBsaWVkQ2xhc3NMaXN0RXhwcihwb3BwZXJPcHRpb25zLmFwcGx5QXJyb3dDbGFzcylcIj48L2Rpdj5cblxuICAgIDwvZGl2PlxuICBgLFxuICBzdHlsZXM6IFtgXG4gICAgLm5neHBfX2NvbnRhaW5lciB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgZ3JleTtcbiAgICAgIGJveC1zaGFkb3c6IDAgMCAycHggcmdiYSgwLCAwLCAwLCAwLjUpO1xuICAgICAgcGFkZGluZzogMTBweDtcbiAgICB9XG5cbiAgICAubmd4cF9fY29udGFpbmVyLm5neHBfX2FuaW1hdGlvbiB7XG4gICAgICAtd2Via2l0LWFuaW1hdGlvbjogbmd4cC1mYWRlSW4gMTUwbXMgZWFzZS1vdXQ7XG4gICAgICAtbW96LWFuaW1hdGlvbjogbmd4cC1mYWRlSW4gMTUwbXMgZWFzZS1vdXQ7XG4gICAgICAtby1hbmltYXRpb246IG5neHAtZmFkZUluIDE1MG1zIGVhc2Utb3V0O1xuICAgICAgYW5pbWF0aW9uOiBuZ3hwLWZhZGVJbiAxNTBtcyBlYXNlLW91dDtcblxuICAgIH1cblxuICAgIC5uZ3hwX19jb250YWluZXIgPiAubmd4cF9fYXJyb3cge1xuICAgICAgYm9yZGVyLWNvbG9yOiBncmV5O1xuICAgICAgd2lkdGg6IDA7XG4gICAgICBoZWlnaHQ6IDA7XG4gICAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgbWFyZ2luOiA1cHg7XG4gICAgfVxuXG4gICAgLm5neHBfX2NvbnRhaW5lclt4LXBsYWNlbWVudF49XCJ0b3BcIl0sXG4gICAgLm5neHBfX2NvbnRhaW5lclt4LXBsYWNlbWVudF49XCJib3R0b21cIl0sXG4gICAgLm5neHBfX2NvbnRhaW5lclt4LXBsYWNlbWVudF49XCJyaWdodFwiXSxcbiAgICAubmd4cF9fY29udGFpbmVyW3gtcGxhY2VtZW50Xj1cImxlZnRcIl0ge1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgfVxuXG4gICAgLm5neHBfX2NvbnRhaW5lclt4LXBsYWNlbWVudF49XCJ0b3BcIl0ge1xuICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgIH1cblxuICAgIC5uZ3hwX19jb250YWluZXJbeC1wbGFjZW1lbnRePVwidG9wXCJdID4gLm5neHBfX2Fycm93IHtcbiAgICAgIGJvcmRlci13aWR0aDogNXB4IDVweCAwIDVweDtcbiAgICAgIGJvcmRlci1yaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICBib3JkZXItYm90dG9tLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIGJvcmRlci1sZWZ0LWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIGJvdHRvbTogLTVweDtcbiAgICAgIGxlZnQ6IGNhbGMoNTAlIC0gNXB4KTtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgIH1cblxuICAgIC5uZ3hwX19jb250YWluZXJbeC1wbGFjZW1lbnRePVwidG9wXCJdID4gLm5neHBfX2Fycm93Ll9fZm9yY2UtYXJyb3cge1xuICAgICAgYm9yZGVyLXJpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xuICAgICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbiAgICAgIGJvcmRlci1sZWZ0LWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xuICAgIH1cblxuICAgIC5uZ3hwX19jb250YWluZXJbeC1wbGFjZW1lbnRePVwiYm90dG9tXCJdIHtcbiAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICB9XG5cbiAgICAubmd4cF9fY29udGFpbmVyW3gtcGxhY2VtZW50Xj1cImJvdHRvbVwiXSA+IC5uZ3hwX19hcnJvdyB7XG4gICAgICBib3JkZXItd2lkdGg6IDAgNXB4IDVweCA1cHg7XG4gICAgICBib3JkZXItdG9wLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIGJvcmRlci1yaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICBib3JkZXItbGVmdC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICB0b3A6IC01cHg7XG4gICAgICBsZWZ0OiBjYWxjKDUwJSAtIDVweCk7XG4gICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgICB9XG5cbiAgICAubmd4cF9fY29udGFpbmVyW3gtcGxhY2VtZW50Xj1cImJvdHRvbVwiXSA+IC5uZ3hwX19hcnJvdy5fX2ZvcmNlLWFycm93IHtcbiAgICAgIGJvcmRlci10b3AtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XG4gICAgICBib3JkZXItcmlnaHQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XG4gICAgICBib3JkZXItbGVmdC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbiAgICB9XG5cbiAgICAubmd4cF9fY29udGFpbmVyW3gtcGxhY2VtZW50Xj1cInJpZ2h0XCJdIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiA1cHg7XG4gICAgfVxuXG4gICAgLm5neHBfX2NvbnRhaW5lclt4LXBsYWNlbWVudF49XCJyaWdodFwiXSA+IC5uZ3hwX19hcnJvdyB7XG4gICAgICBib3JkZXItd2lkdGg6IDVweCA1cHggNXB4IDA7XG4gICAgICBib3JkZXItdG9wLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIGJvcmRlci1ib3R0b20tY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgYm9yZGVyLWxlZnQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgbGVmdDogLTVweDtcbiAgICAgIHRvcDogY2FsYyg1MCUgLSA1cHgpO1xuICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gICAgfVxuXG4gICAgLm5neHBfX2NvbnRhaW5lclt4LXBsYWNlbWVudF49XCJyaWdodFwiXSA+IC5uZ3hwX19hcnJvdy5fX2ZvcmNlLWFycm93IHtcbiAgICAgIGJvcmRlci10b3AtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XG4gICAgICBib3JkZXItYm90dG9tLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xuICAgICAgYm9yZGVyLWxlZnQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XG4gICAgfVxuXG4gICAgLm5neHBfX2NvbnRhaW5lclt4LXBsYWNlbWVudF49XCJsZWZ0XCJdIHtcbiAgICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgIH1cblxuICAgIC5uZ3hwX19jb250YWluZXJbeC1wbGFjZW1lbnRePVwibGVmdFwiXSA+IC5uZ3hwX19hcnJvdyB7XG4gICAgICBib3JkZXItd2lkdGg6IDVweCAwIDVweCA1cHg7XG4gICAgICBib3JkZXItdG9wLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIGJvcmRlci1ib3R0b20tY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgYm9yZGVyLXJpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIHJpZ2h0OiAtNXB4O1xuICAgICAgdG9wOiBjYWxjKDUwJSAtIDVweCk7XG4gICAgICBtYXJnaW4tbGVmdDogMDtcbiAgICAgIG1hcmdpbi1yaWdodDogMDtcbiAgICB9XG5cbiAgICAubmd4cF9fY29udGFpbmVyW3gtcGxhY2VtZW50Xj1cImxlZnRcIl0gPiAubmd4cF9fYXJyb3cuX19mb3JjZS1hcnJvdyB7XG4gICAgICBib3JkZXItdG9wLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xuICAgICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbiAgICAgIGJvcmRlci1yaWdodC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbiAgICB9XG5cbiAgICBALXdlYmtpdC1rZXlmcmFtZXMgbmd4cC1mYWRlSW4ge1xuICAgICAgMCUge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgfVxuXG4gICAgICAxJSB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgfVxuXG4gICAgICAxMDAlIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgQGtleWZyYW1lcyBuZ3hwLWZhZGVJbiB7XG4gICAgICAwJSB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICB9XG5cbiAgICAgIDElIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICB9XG5cbiAgICAgIDEwMCUge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgIH1cbiAgICB9XG4gIGBdXG59KVxuZXhwb3J0IGNsYXNzIFBvcHBlckNvbnRlbnQgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xuXG4gIHBvcHBlck9wdGlvbnM6IFBvcHBlckNvbnRlbnRPcHRpb25zID0gPFBvcHBlckNvbnRlbnRPcHRpb25zPntcbiAgICBkaXNhYmxlQW5pbWF0aW9uOiBmYWxzZSxcbiAgICBkaXNhYmxlRGVmYXVsdFN0eWxpbmc6IGZhbHNlLFxuICAgIHBsYWNlbWVudDogUGxhY2VtZW50cy5BdXRvLFxuICAgIGJvdW5kYXJpZXNFbGVtZW50OiAnJyxcbiAgICB0cmlnZ2VyOiBUcmlnZ2Vycy5IT1ZFUixcbiAgICBwb3NpdGlvbkZpeGVkOiBmYWxzZSxcbiAgICBhcHBlbmRUb0JvZHk6IGZhbHNlLFxuICAgIHBvcHBlck1vZGlmaWVyczoge31cbiAgfTtcblxuICByZWZlcmVuY2VPYmplY3Q6IEhUTUxFbGVtZW50O1xuXG4gIGlzTW91c2VPdmVyOiBib29sZWFuID0gZmFsc2U7XG5cbiAgb25IaWRkZW4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgdGV4dDogc3RyaW5nO1xuXG4gIHBvcHBlckluc3RhbmNlOiBQb3BwZXI7XG5cbiAgZGlzcGxheVR5cGU6IHN0cmluZyA9IFwibm9uZVwiO1xuXG4gIG9wYWNpdHk6IG51bWJlciA9IDA7XG5cbiAgYXJpYUhpZGRlbjogc3RyaW5nID0gJ3RydWUnO1xuXG4gIGFycm93Q29sb3I6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIG9uVXBkYXRlOiBGdW5jdGlvbjtcblxuICBzdGF0ZTogYm9vbGVhbiA9IHRydWU7XG5cbiAgcHJpdmF0ZSBnbG9iYWxSZXNpemU6IGFueTtcblxuICBAVmlld0NoaWxkKFwicG9wcGVyVmlld1JlZlwiKVxuICBwb3BwZXJWaWV3UmVmOiBFbGVtZW50UmVmO1xuXG4gIEBIb3N0TGlzdGVuZXIoJ21vdXNlb3ZlcicpXG4gIG9uTW91c2VPdmVyKCkge1xuICAgIHRoaXMuaXNNb3VzZU92ZXIgPSB0cnVlO1xuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignbW91c2VsZWF2ZScpXG4gIHNob3dPbkxlYXZlKCkge1xuICAgIHRoaXMuaXNNb3VzZU92ZXIgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5wb3BwZXJPcHRpb25zLnRyaWdnZXIgIT09IFRyaWdnZXJzLkhPVkVSICYmICF0aGlzLnBvcHBlck9wdGlvbnMuaGlkZU9uTW91c2VMZWF2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmhpZGUoKTtcbiAgfVxuXG4gIG9uRG9jdW1lbnRSZXNpemUoKSB7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBlbGVtUmVmOiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICBwcml2YXRlIHZpZXdSZWY6IFZpZXdDb250YWluZXJSZWYsXG4gICAgcHJpdmF0ZSBDRFI6IENoYW5nZURldGVjdG9yUmVmKSB7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLmNsZWFuKCk7XG4gICAgaWYodGhpcy5wb3BwZXJPcHRpb25zLmFwcGVuZFRvICYmIHRoaXMuZWxlbVJlZiAmJiB0aGlzLmVsZW1SZWYubmF0aXZlRWxlbWVudCAmJiB0aGlzLmVsZW1SZWYubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlKXtcbiAgICAgIHRoaXMudmlld1JlZi5kZXRhY2goKTtcbiAgICAgIHRoaXMuZWxlbVJlZi5uYXRpdmVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtUmVmLm5hdGl2ZUVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGNsZWFuKCkge1xuICAgIHRoaXMudG9nZ2xlVmlzaWJpbGl0eShmYWxzZSk7XG4gICAgaWYgKCF0aGlzLnBvcHBlckluc3RhbmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgICh0aGlzLnBvcHBlckluc3RhbmNlIGFzIGFueSkuZGlzYWJsZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5wb3BwZXJJbnN0YW5jZS5kZXN0cm95KCk7XG5cbiAgfVxuXG4gIHNob3coKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnJlZmVyZW5jZU9iamVjdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGFwcGVuZFRvUGFyZW50ID0gdGhpcy5wb3BwZXJPcHRpb25zLmFwcGVuZFRvICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5wb3BwZXJPcHRpb25zLmFwcGVuZFRvKTtcbiAgICBpZiAoYXBwZW5kVG9QYXJlbnQgJiYgdGhpcy5lbGVtUmVmLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZSAhPT0gYXBwZW5kVG9QYXJlbnQpIHtcbiAgICAgIHRoaXMuZWxlbVJlZi5uYXRpdmVFbGVtZW50LnBhcmVudE5vZGUgJiYgdGhpcy5lbGVtUmVmLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1SZWYubmF0aXZlRWxlbWVudCk7XG4gICAgICBhcHBlbmRUb1BhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1SZWYubmF0aXZlRWxlbWVudCk7XG4gICAgfVxuXG4gICAgbGV0IHBvcHBlck9wdGlvbnM6IFBvcHBlci5Qb3BwZXJPcHRpb25zID0gPFBvcHBlci5Qb3BwZXJPcHRpb25zPntcbiAgICAgIHBsYWNlbWVudDogdGhpcy5wb3BwZXJPcHRpb25zLnBsYWNlbWVudCxcbiAgICAgIHBvc2l0aW9uRml4ZWQ6IHRoaXMucG9wcGVyT3B0aW9ucy5wb3NpdGlvbkZpeGVkLFxuICAgICAgbW9kaWZpZXJzOiB7XG4gICAgICAgIGFycm93OiB7XG4gICAgICAgICAgZWxlbWVudDogdGhpcy5wb3BwZXJWaWV3UmVmLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm5neHBfX2Fycm93JylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgaWYgKHRoaXMub25VcGRhdGUpIHtcbiAgICAgIHBvcHBlck9wdGlvbnMub25VcGRhdGUgPSB0aGlzLm9uVXBkYXRlIGFzIGFueTtcbiAgICB9XG5cbiAgICBsZXQgYm91bmRhcmllc0VsZW1lbnQgPSB0aGlzLnBvcHBlck9wdGlvbnMuYm91bmRhcmllc0VsZW1lbnQgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnBvcHBlck9wdGlvbnMuYm91bmRhcmllc0VsZW1lbnQpO1xuXG4gICAgaWYgKHBvcHBlck9wdGlvbnMubW9kaWZpZXJzICYmIGJvdW5kYXJpZXNFbGVtZW50KSB7XG4gICAgICBwb3BwZXJPcHRpb25zLm1vZGlmaWVycy5wcmV2ZW50T3ZlcmZsb3cgPSB7Ym91bmRhcmllc0VsZW1lbnR9O1xuICAgIH1cbiAgICBpZiAocG9wcGVyT3B0aW9ucy5tb2RpZmllcnMgJiYgdGhpcy5wb3BwZXJPcHRpb25zLnByZXZlbnRPdmVyZmxvdyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBwb3BwZXJPcHRpb25zLm1vZGlmaWVycy5wcmV2ZW50T3ZlcmZsb3cgPSBwb3BwZXJPcHRpb25zLm1vZGlmaWVycy5wcmV2ZW50T3ZlcmZsb3cgfHwge307XG4gICAgICBwb3BwZXJPcHRpb25zLm1vZGlmaWVycy5wcmV2ZW50T3ZlcmZsb3cuZW5hYmxlZCA9IHRoaXMucG9wcGVyT3B0aW9ucy5wcmV2ZW50T3ZlcmZsb3c7XG4gICAgICBpZiAoIXBvcHBlck9wdGlvbnMubW9kaWZpZXJzLnByZXZlbnRPdmVyZmxvdy5lbmFibGVkKSB7XG4gICAgICAgIHBvcHBlck9wdGlvbnMubW9kaWZpZXJzLmhpZGUgPSB7ZW5hYmxlZDogZmFsc2V9O1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmRldGVybWluZUFycm93Q29sb3IoKTtcbiAgICBwb3BwZXJPcHRpb25zLm1vZGlmaWVycyA9IE9iamVjdC5hc3NpZ24ocG9wcGVyT3B0aW9ucy5tb2RpZmllcnMsIHRoaXMucG9wcGVyT3B0aW9ucy5wb3BwZXJNb2RpZmllcnMpO1xuXG4gICAgdGhpcy5wb3BwZXJJbnN0YW5jZSA9IG5ldyBQb3BwZXIoXG4gICAgICB0aGlzLnJlZmVyZW5jZU9iamVjdCxcbiAgICAgIHRoaXMucG9wcGVyVmlld1JlZi5uYXRpdmVFbGVtZW50LFxuICAgICAgcG9wcGVyT3B0aW9ucyxcbiAgICApO1xuXG4gICAgKHRoaXMucG9wcGVySW5zdGFuY2UgYXMgYW55KS5lbmFibGVFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuc2NoZWR1bGVVcGRhdGUoKTtcbiAgICB0aGlzLnRvZ2dsZVZpc2liaWxpdHkodHJ1ZSk7XG4gICAgdGhpcy5nbG9iYWxSZXNpemUgPSB0aGlzLnJlbmRlcmVyLmxpc3RlbignZG9jdW1lbnQnLCAncmVzaXplJywgdGhpcy5vbkRvY3VtZW50UmVzaXplLmJpbmQodGhpcykpXG4gIH1cblxuICBwcml2YXRlIGRldGVybWluZUFycm93Q29sb3IoKSB7XG4gICAgWydiYWNrZ3JvdW5kLWNvbG9yJywgJ2JhY2tncm91bmRDb2xvciddLnNvbWUoKGNscikgPT4ge1xuICAgICAgaWYgKCF0aGlzLnBvcHBlck9wdGlvbnMuc3R5bGVzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnBvcHBlck9wdGlvbnMuc3R5bGVzLmhhc093blByb3BlcnR5KGNscikpIHtcbiAgICAgICAgdGhpcy5hcnJvd0NvbG9yID0gdGhpcy5wb3BwZXJPcHRpb25zLnN0eWxlc1tjbHJdO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KVxuICB9XG5cbiAgdXBkYXRlKCk6IHZvaWQge1xuICAgIHRoaXMucG9wcGVySW5zdGFuY2UgJiYgKHRoaXMucG9wcGVySW5zdGFuY2UgYXMgYW55KS51cGRhdGUoKTtcbiAgfVxuXG4gIHNjaGVkdWxlVXBkYXRlKCk6IHZvaWQge1xuICAgIHRoaXMucG9wcGVySW5zdGFuY2UgJiYgKHRoaXMucG9wcGVySW5zdGFuY2UgYXMgYW55KS5zY2hlZHVsZVVwZGF0ZSgpO1xuICB9XG5cbiAgaGlkZSgpOiB2b2lkIHtcblxuICAgIGlmICh0aGlzLnBvcHBlckluc3RhbmNlKSB7XG4gICAgICB0aGlzLnBvcHBlckluc3RhbmNlLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgdGhpcy50b2dnbGVWaXNpYmlsaXR5KGZhbHNlKTtcbiAgICB0aGlzLm9uSGlkZGVuLmVtaXQoKTtcbiAgfVxuXG4gIHRvZ2dsZVZpc2liaWxpdHkoc3RhdGU6IGJvb2xlYW4pIHtcbiAgICBpZiAoIXN0YXRlKSB7XG4gICAgICB0aGlzLm9wYWNpdHkgPSAwO1xuICAgICAgdGhpcy5kaXNwbGF5VHlwZSA9IFwibm9uZVwiO1xuICAgICAgdGhpcy5hcmlhSGlkZGVuID0gJ3RydWUnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMub3BhY2l0eSA9IDE7XG4gICAgICB0aGlzLmRpc3BsYXlUeXBlID0gXCJibG9ja1wiO1xuICAgICAgdGhpcy5hcmlhSGlkZGVuID0gJ2ZhbHNlJztcbiAgICB9XG4gICAgaWYgKCF0aGlzLkNEUlsnZGVzdHJveWVkJ10pIHtcbiAgICAgIHRoaXMuQ0RSLmRldGVjdENoYW5nZXMoKTtcbiAgICB9XG4gIH1cblxuICBleHRyYWN0QXBwbGllZENsYXNzTGlzdEV4cHIoY2xhc3NMaXN0Pzogc3RyaW5nKTogT2JqZWN0IHwgbnVsbCB7XG4gICAgaWYgKCFjbGFzc0xpc3QgfHwgdHlwZW9mIGNsYXNzTGlzdCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGNsYXNzTGlzdFxuICAgICAgICAucmVwbGFjZSgvIC8sICcnKVxuICAgICAgICAuc3BsaXQoJywnKVxuICAgICAgICAucmVkdWNlKChhY2MsIGNsc3MpID0+IHtcbiAgICAgICAgICBhY2NbY2xzc10gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjbGVhckdsb2JhbFJlc2l6ZSgpIHtcbiAgICB0aGlzLmdsb2JhbFJlc2l6ZSAmJiB0eXBlb2YgdGhpcy5nbG9iYWxSZXNpemUgPT09ICdmdW5jdGlvbicgJiYgdGhpcy5nbG9iYWxSZXNpemUoKTtcbiAgfVxuXG59XG4iXX0=