scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
  - job_name: 'node'
    static_configs:
      - targets:
{% for host in groups['all'] %}
          - '{{ host }}:8100'
{% endfor %}
  - job_name: 'spring'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets:
{% for host in groups['saw-services'] %}
          - '{{ host }}:9400'
          - '{{ host }}:9500'
          - '{{ host }}:9600'
          - '{{ host }}:9700'
          - '{{ host }}:9900'
{% endfor %}
{% for host in groups['saw-security'] %}
          # Note: Enable the Security Service Prometheus endpoint
          # after it has been upgraded to Spring Boot 2.x
          # (https://jira.synchronoss.net:8443/jira/browse/SIP-3326)
          #- '{{ host }}:9000'
{% endfor %}
  - job_name: 'haproxy'
    metrics_path: '/metrics'
    static_configs:
      - targets:
{% for host in groups['saw-proxy'] %}
          - '{{ host }}:3100'
{% endfor %}
