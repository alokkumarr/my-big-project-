<?xml version="1.0"?>
<assembly
    xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
<id>package</id>
<formats>
    <format>dir</format>
</formats>
  <fileSets>
	  <fileSet>
		  <directoryMode>755</directoryMode>
		  <directory>${project.basedir}/../saw-common/target/sip-common-${project.version}-package/sip-common-${project.version}/lib</directory>
		  <outputDirectory>lib</outputDirectory>
		  <fileMode>644</fileMode>
	  </fileSet>
	  <fileSet>
		  <directoryMode>755</directoryMode>
		  <directory>${project.basedir}/../saw-metadata-service/target/sip-metadata-service-${project.version}-package/sip-metadata-service-${project.version}/lib</directory>
		  <outputDirectory>lib</outputDirectory>
		  <fileMode>644</fileMode>
	  </fileSet>
    <fileSet>
      <directoryMode>755</directoryMode>
      <directory>${project.basedir}/../sip-transport-service/target/sip-transport-service-${project.version}-package/sip-transport-service-${project.version}/netty-lib</directory>
      <outputDirectory>netty-lib</outputDirectory>
      <fileMode>644</fileMode>
    </fileSet>
	  <fileSet>
		  <directoryMode>755</directoryMode>
		  <directory>${project.basedir}/../sip-data-access/target</directory>
		  <outputDirectory>sparklib</outputDirectory>
		  <includes>
			  <include>sip-data-access-${project.version}-jar-with-dependencies.jar</include>
		  </includes>
		  <fileMode>644</fileMode>
	  </fileSet>
  </fileSets>
  <dependencySets>
    <dependencySet>
		<outputDirectory>lib</outputDirectory>
		<outputFileNameMapping>${artifact.groupId}.${artifact.artifactId}-${artifact.version}.${artifact.extension}</outputFileNameMapping>
		<scope>runtime</scope>
		<excludes>
      <!--exclude the io.netty from main lib path, it will included at runtime -->
      <exclude>io.netty</exclude>
			<exclude>*-maven-*</exclude>
		</excludes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>netty-lib</outputDirectory>
      <includes>
        <include>
          io.netty
        </include>
      </includes>
    </dependencySet>
  </dependencySets>
</assembly>

